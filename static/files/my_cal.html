<!DOCTYPE html>

<html lang="en">

<head>

    <meta charset="UTF-8">

    <meta name="viewport" content="width=device-width, initial-scale=1.0">

    <title>Monthly Schedule Calendar</title>

    <script src="https://cdn.tailwindcss.com"></script>

    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700&display=swap" rel="stylesheet">

    <style>

        body {

            font-family: 'Inter', sans-serif;

        }

        .calendar-grid {

            display: grid;

            grid-template-columns: repeat(7, minmax(0, 1fr));

            grid-auto-rows: minmax(160px, auto);

        }

        .day-cell {

            min-height: 160px;

        }

        .event {

            font-size: 0.75rem;

            padding: 2px 6px;

            border-radius: 4px;

            margin-bottom: 4px;

            overflow: hidden;

            text-overflow: ellipsis;

            white-space: nowrap;

        }

    </style>

</head>

<body class="bg-gray-100 text-gray-800 p-4 sm:p-6 md:p-8">

    <div class="max-w-7xl mx-auto bg-white rounded-2xl shadow-lg p-6">

        <div class="flex items-center justify-between mb-6">

            <h1 id="calendar-title" class="text-2xl sm:text-3xl font-bold text-gray-900">Schedule</h1>

            <div class="flex flex-wrap gap-2 sm:gap-4 text-xs sm:text-sm">

                <div class="flex items-center"><span class="w-3 h-3 rounded-full bg-pink-500 mr-2"></span>FEM</div>

                <div class="flex items-center"><span class="w-3 h-3 rounded-full bg-amber-500 mr-2"></span>SMM</div>

                <div class="flex items-center"><span class="w-3 h-3 rounded-full bg-teal-500 mr-2"></span>CIM</div>

                <div class="flex items-center"><span class="w-3 h-3 rounded-full bg-purple-500 mr-2"></span>Teaching</div>

                <div class="flex items-center"><span class="w-3 h-3 rounded-full bg-indigo-500 mr-2"></span>MIBL</div>

                <div class="flex items-center"><span class="w-3 h-3 rounded-full bg-orange-500 mr-2"></span>Group Mtg</div>

                <div class="flex items-center"><span class="w-3 h-3 rounded-full bg-gray-400 mr-2"></span>Standing</div>

            </div>

        </div>



        <div id="calendar-container"></div>

    </div>



    <script>

        // --- SCHEDULE DATA AND CONFIGURATION ---

        const year = 2025;

        const cycleStartInfo = {

            startDate: new Date(2025, 7, 11), // Aug 11 - Start of a "Week 1"

            startCycle: 1

        };



        const cancellations = [

            // Using new Date(YYYY, MM, DD) for robust, timezone-safe dates. Month is 0-indexed.

            { start: new Date(2025, 8, 29), end: new Date(2025, 9, 4), reason: 'Japan Conference' },

            { start: new Date(2025, 10, 6), end: new Date(2025, 10, 7), reason: 'Madison Trip' },

            { start: new Date(2025, 10, 26), end: new Date(2025, 10, 28), reason: 'Thanksgiving' },

            { start: new Date(2025, 11, 22), end: new Date(2026, 0, 1), reason: 'Winter Break' }

        ];



        const events = [

            // --- Teaching ---

            { title: "Lecture Prep", days: [2, 4, 5], time: "9-10:30a", type: "teaching" },

            { title: "Lecture 521", days: [2, 4], time: "10:30a-12p", type: "teaching" },

            { title: "Senior Design Lecture", days: [5], time: "11:30a-12:30p", type: "teaching" },

            { title: "Senior Design Tag Up", days: [1], time: "10:45-11:15a", type: "teaching" },

            // --- Standing Meetings ---

            { title: "Project Update", days: [3], time: "10-11a", type: "standing" },

            { title: "Consulting Meeting", days: [5], time: "3-4p", type: "standing" },

            { title: "Project Update (Bi-W)", days: [1], time: "4-5p", type: "standing", frequency: "bi-weekly", startWeek: 35 },

            { title: "Project Update (Monthly)", days: [1], time: "12-1p", type: "standing", frequency: "monthly" },

            { title: "MIBL Meeting (Bi-W)", days: [2], time: "12-2p", type: "mibl", frequency: "bi-weekly", startWeek: 35 },

            { title: "Group Meeting (Bi-W)", days: [3], time: "12-2p", type: "group", frequency: "bi-weekly", startWeek: 34 },

            { title: "Irr-CF Project (Monthly)", days: [3], time: "10-11a", type: "standing", frequency: "monthly-second-wed" },



            // --- Subgroups ---

            { title: "Subgroup: SMM", days: [2], time: "2-4p", type: "smm", cycle: 1 },

            { title: "Subgroup: FEM", days: [4], time: "2-4p", type: "fem", cycle: 1 },

            { title: "Subgroup: SMM", days: [2], time: "2-4p", type: "smm", cycle: 2 },

            { title: "Subgroup: CIM", days: [4], time: "2-4p", type: "cim", cycle: 2 },

            { title: "Subgroup: FEM", days: [2], time: "2-4p", type: "fem", cycle: 3 },

            { title: "Subgroup: CIM", days: [4], time: "2-4p", type: "cim", cycle: 3 },

            

            // --- Specially Ordered Project Updates ---

            { title: "Project Update (Bi-W)", days: [2], time: "4-5p", type: "standing", frequency: "bi-weekly", startWeek: 35 },

            { title: "New Project Mtg (Bi-W)", days: [4], time: "4-5p", type: "standing", frequency: "bi-weekly", startWeek: 36 },



            // --- Individual 1-on-1s ---

            { title: "1:1 Gabriella", days: [3], time: "2-2:30p", type: "cim", cycle: 1 },

            { title: "1:1 Hangyu", days: [3], time: "2:30-3p", type: "cim", cycle: 1 },

            { title: "1:1 Ian", days: [3], time: "3-3:30p", type: "cim", cycle: 1 },

            { title: "1:1 Txai", days: [3], time: "3:30-4p", type: "cim", cycle: 1 },

            { title: "1:1 Timothy", days: [3], time: "4-4:30p", type: "cim", cycle: 1 },

            { title: "1:1 Ethan", days: [3], time: "2:30-3p", type: "fem", cycle: 2 },

            { title: "1:1 Lauryn", days: [3], time: "3-3:30p", type: "fem", cycle: 2 },

            { title: "1:1 Lingfeng", days: [3], time: "3:30-4p", type: "fem", cycle: 2 },

            { title: "1:1 Hannah", days: [3], time: "4-4:30p", type: "fem", cycle: 2 },

            { title: "1:1 Justin", days: [3], time: "2-2:30p", type: "smm", cycle: 3 },

            { title: "1:1 Mackenzie", days: [3], time: "3-3:30p", type: "smm", cycle: 3 },

            { title: "1:1 Wyatt", days: [3], time: "3:30-4p", type: "smm", cycle: 3 },

            { title: "1:1 Matthew", days: [3], time: "4-4:30p", type: "smm", cycle: 3 },

            { title: "1:1 Yuhan", days: [3], time: "4:30-5p", type: "smm", cycle: 3 },

        ];



        const eventColors = {

            fem: "bg-pink-100 text-pink-800",

            smm: "bg-amber-100 text-amber-800",

            cim: "bg-teal-100 text-teal-800",

            teaching: "bg-purple-100 text-purple-800",

            standing: "bg-gray-100 text-gray-800",

            group: "bg-orange-100 text-orange-800",

            mibl: "bg-indigo-100 text-indigo-800",

            cancellation: "bg-yellow-100 text-yellow-800"

        };

        

        // --- HELPER FUNCTIONS ---

        function getWeekNumber(d) {

            d = new Date(Date.UTC(d.getFullYear(), d.getMonth(), d.getDate()));

            d.setUTCDate(d.getUTCDate() + 4 - (d.getUTCDay() || 7));

            const yearStart = new Date(Date.UTC(d.getUTCFullYear(), 0, 1));

            return Math.ceil((((d - yearStart) / 86400000) + 1) / 7);

        }



        function getCycleWeek(date, startInfo) {

            const diffTime = date.getTime() - startInfo.startDate.getTime();

            const diffWeeks = Math.floor(diffTime / (1000 * 60 * 60 * 24 * 7));

            return ((startInfo.startCycle - 1 + diffWeeks) % 3) + 1;

        }



        function getCancellationReason(date) {

            const checkDate = new Date(date.getFullYear(), date.getMonth(), date.getDate());

            for (const period of cancellations) {

                const startDate = new Date(period.start.getFullYear(), period.start.getMonth(), period.start.getDate());

                const endDate = new Date(period.end.getFullYear(), period.end.getMonth(), period.end.getDate());

                if (checkDate >= startDate && checkDate <= endDate) {

                    return period.reason;

                }

            }

            return null;

        }



        // --- CALENDAR GENERATION LOGIC ---

        function generateCalendar(year, month) {

            const monthName = new Date(year, month).toLocaleString('default', { month: 'long' });

            const container = document.getElementById('calendar-container');



            let html = `

                <div class="mb-12">

                    <h2 class="text-xl sm:text-2xl font-bold text-gray-800 mb-4">${monthName} ${year}</h2>

                    <div class="grid grid-cols-7 text-center font-semibold text-gray-600 mb-2 text-sm">

                        <div>Sun</div><div>Mon</div><div>Tue</div><div>Wed</div><div>Thu</div><div>Fri</div><div>Sat</div>

                    </div>

                    <div class="calendar-grid border-t border-l border-gray-200">

            `;



            const date = new Date(year, month, 1);

            const firstDay = date.getDay(); // Sunday is 0

            const daysInMonth = new Date(year, month + 1, 0).getDate();

            

            const calendarStartDate = new Date(2025, 7, 25); // August 25th



            for (let i = 0; i < firstDay; i++) {

                html += `<div class="day-cell border-r border-b border-gray-200 bg-gray-50"></div>`;

            }



            for (let day = 1; day <= daysInMonth; day++) {

                const currentDate = new Date(year, month, day);

                const dayOfWeek = currentDate.getDay(); // Sunday is 0, Monday is 1...

                

                html += `<div class="day-cell border-r border-b border-gray-200 p-2 relative">`;



                if (currentDate >= calendarStartDate) {

                    const weekNum = getWeekNumber(currentDate);

                    const cycleWeek = getCycleWeek(currentDate, cycleStartInfo);



                    html += `<span class="font-semibold text-sm">${day}</span>

                             <span class="absolute top-2 right-2 text-xs text-gray-400">W${cycleWeek}</span>

                             <div class="mt-1">`;

                    

                    const cancellationReason = getCancellationReason(currentDate);

                    if (cancellationReason) {

                        html += `<div class="event ${eventColors['cancellation']}">${cancellationReason}</div>`;

                    } else {

                        events.forEach(event => {

                            let shouldAdd = false;

                            if (event.days.includes(dayOfWeek)) {

                                if (event.frequency === 'bi-weekly') {

                                    if ((weekNum - event.startWeek) % 2 === 0) shouldAdd = true;

                                } else if (event.frequency === 'monthly') {

                                    if (day <= 7 && dayOfWeek === 1) shouldAdd = true; // First Monday

                                } else if (event.frequency === 'monthly-second-wed') {

                                    if (day > 7 && day <= 14 && dayOfWeek === 3) shouldAdd = true; // Second Wednesday

                                } else if (event.cycle) {

                                    if (event.cycle === cycleWeek) shouldAdd = true;

                                } else {

                                    shouldAdd = true; // Weekly or default

                                }

                            }



                            if (shouldAdd) {

                                html += `<div class="event ${eventColors[event.type]}">${event.time} ${event.title}</div>`;

                            }

                        });

                    }

                    html += `</div>`;

                }

                html += `</div>`;

            }

            

            const totalCells = firstDay + daysInMonth;

            const remainingCells = (7 - (totalCells % 7)) % 7;

            for (let i = 0; i < remainingCells; i++) {

                 html += `<div class="day-cell border-r border-b border-gray-200 bg-gray-50"></div>`;

            }



            html += `</div></div>`;

            container.innerHTML += html;

        }



        // --- INITIALIZATION ---

        document.addEventListener('DOMContentLoaded', () => {

            document.getElementById('calendar-title').textContent = `Full Schedule (Aug 25 - Dec 2025)`;

            const container = document.getElementById('calendar-container');

            container.innerHTML = ''; // Clear container before generating

            

            for (let month = 7; month <= 11; month++) { // 7 = August, 11 = December

                generateCalendar(year, month);

            }

        });

    </script>

</body>

</html>



